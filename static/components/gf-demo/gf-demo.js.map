{"version":3,"sources":["/components/gf-demo/gf-demo.ts"],"names":[],"mappings":"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","file":"gf-demo.js","sourcesContent":["import * as avalon from 'avalon2';\nimport * as beyond from '../../vendor/beyond';\n\nimport { createForm, message } from \"ane\";\n\nimport { demo as demoStore } from '../../services/storeService';\n\nexport const name = 'gf-demo';\n\navalon.component(name, {\n    template: __inline('./gf-demo.html'),\n    defaults: {\n        show: false,\n        list: [],\n        $searchForm: createForm({ autoAsyncChange: false }),\n        pagination: {\n            current: 1, pageSize: 6, total: 0\n        },\n        pattern: /^\\d+-\\d+-\\d+( \\d+:\\d+:\\d+)?$/,\n        search() {\n            this.$searchForm.validateFields().then(isAllValid => {\n                if (isAllValid) {\n                    this.fetch();\n                }\n            });\n        },\n        fetch() {\n            const page = {\n                start: this.pagination.pageSize * (this.pagination.current - 1),\n                limit: this.pagination.pageSize\n            };\n            demoStore.fetch({...this.$searchForm.record, ...page}).then(data => {\n                this.pagination.total = data.total;\n                this.list = data.list;\n            });\n        },\n        actions(type, text, record, index) {\n            if (type === 'add') {\n                form.isEdit = false;\n                form.title = '新增';\n                form.record = demoStore.initialData();\n                this.show = true;\n            } else if (type === 'edit') {\n                form.isEdit = true;\n                form.title = '修改';\n                form.record = record;\n                this.show = true;\n            } else if (type === 'delete') {\n                demoStore.remove(record.region_id).then(result => {\n                    if (result.code === '0') {\n                        message.success({\n                            content: '删除成功'\n                        });\n                    }\n                });\n            }\n        },\n        handleOk() {\n            form.$form.validateFields().then(isAllValid => {\n                if (isAllValid) {\n                    if (form.isEdit) {\n                        demoStore.update(form.$form.record).then(result => {\n                            this.fetch();\n                        });\n                    } else {\n                        demoStore.create(form.$form.record).then(result => {\n                            this.fetch();\n                        });\n                    }\n                    this.show = false;\n                }\n            })\n        },\n        handleTableChange(pagination) {\n            this.pagination.current = pagination.current;\n            this.fetch();\n        },\n        onInit(event) {\n            this.fetch();\n        }\n    }\n});\nvar form = avalon.define({\n    $id: 'demo_form',\n    title: '',\n    isEdit: false,\n    $form: createForm({\n        record: demoStore.initialData(),\n        onFieldsChange(fields, record) {\n            //avalon.mix(form.record, record);\n        }\n    }),\n    record: demoStore.initialData()\n});"]}