{"version":3,"sources":["/components/doc-ms-form/doc-ms-form.ts"],"names":[],"mappings":";;;AAAA,gCAAkC;AAGlC,2DAA0D;AAC1D,2BAA0C;AAE7B,YAAI,GAAG,aAAa,CAAC;AAElC,MAAM,CAAC,SAAS,CAAC,YAAI,EAAE;IACnB,QAAQ,EAAE,QAAQ,CAAC,oBAAoB,CAAC;IACxC,QAAQ,EAAE;QACN,KAAK,EAAE,gBAAU,CAAC;YACd,MAAM,EAAE,WAAW,EAAE;SACxB,CAAC;QACF,MAAM,EAAE,WAAW,EAAE;QACrB,IAAI,EAAE,EAAE;QACR,MAAM,EAAE,CAAC;QACT,aAAa,EAAE,0BAAU,GAAG,sBAAsB;QAClD,YAAY;YACR,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACnC,CAAC;QACD,eAAe,YAAC,MAAM;YAClB,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACzC,CAAC;QACD,kBAAkB,YAAC,IAAI;YACnB,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,YAAY,IAAI,IAAI,CAAC,IAAI,KAAK,WAAW,CAAC,CAAC,CAAC;gBAC1D,aAAO,CAAC,KAAK,CAAC;oBACV,OAAO,EAAE,oBAAoB;iBAChC,CAAC,CAAC;gBACH,MAAM,CAAC,KAAK,CAAC;YACjB,CAAC;YACD,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC9B,aAAO,CAAC,KAAK,CAAC;oBACV,OAAO,EAAE,eAAe;iBAC3B,CAAC,CAAC;gBACH,MAAM,CAAC,KAAK,CAAC;YACjB,CAAC;YACD,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QACD,YAAY,YAAC,CAAC;YACV,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAChC,CAAC;QACD,MAAM;YACF,gDAAgD;YAChD,oBAAoB;YACpB,IAAI;YACJ,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC;QAChC,CAAC;QACD,MAAM,YAAC,KAAK;YAAZ,iBAOC;YANG,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG,UAAC,MAAM,EAAE,MAAM;gBACvC,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;YAChD,CAAC;YACD,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,WAAC;gBACnB,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACnB,CAAC,CAAC;QACN,CAAC;KACJ;CACJ,CAAC,CAAC;AAEH;IACI,MAAM,CAAC;QACH,IAAI,EAAE,KAAK;QACX,MAAM,EAAE,GAAG;QACX,WAAW,EAAE,CAAC,aAAa,CAAC;QAC5B,QAAQ,EAAE,sBAAsB;QAChC,KAAK,EAAE,CAAC,MAAM,CAAC;QACf,MAAM,EAAE,EAAE;QACV,SAAS,EAAE,CAAC,YAAY,CAAC;QACzB,GAAG,EAAE,EAAE;QACP,UAAU,EAAE,CAAC,8EAA8E,CAAC;KAC/F,CAAC;AACN,CAAC","file":"doc-ms-form.js","sourcesContent":["import * as avalon from 'avalon2';\n\nimport ajax from '../../services/ajaxService';\nimport { serviceUrl } from \"../../services/configService\";\nimport { createForm, message } from \"ane\";\n\nexport const name = 'doc-ms-form';\n\navalon.component(name, {\n    template: __inline('./doc-ms-form.html'),\n    defaults: {\n        $form: createForm({\n            record: initialData()\n        }),\n        record: initialData(),\n        json: '',\n        expire: 0,\n        fileUploadUrl: serviceUrl + '/api/file/uploadFile',\n        addEducation() {\n            this.record.education.push('');\n        },\n        removeEducation(school) {\n            this.record.education.remove(school);\n        },\n        handleBeforeUpload(file) {\n            if (file.type !== 'image/jpeg' && file.type !== 'image/png') {\n                message.error({\n                    content: '只能选择jpg或者png类型的图片！'\n                });\n                return false;\n            }\n            if (file.size / 1024 / 1024 > 1) {\n                message.error({\n                    content: '选择的图片必须小于1MB！'\n                });\n                return false;\n            }\n            return true;\n        },\n        handleChange(e) {\n            console.log(e.target.value);\n        },\n        submit() {\n            // if (!avalon.vmodels['doc_form'].validate()) {\n            //     return false;\n            // }\n            this.$form.validateFields();\n        },\n        onInit(event) {\n            this.$form.onFieldsChange = (fields, record) => {\n                this.json = JSON.stringify(record, null, 2);\n            }\n            this.$watch('expire', v => {\n                console.log(v);\n            })\n        }\n    }\n});\n\nfunction initialData() {\n    return {\n        name: '123',\n        gender: 'F',\n        masterpiece: ['xxapp/msBus'],\n        birthday: '2017-03-25T16:00:00Z',\n        hobby: ['code'],\n        avatar: '',\n        education: ['常乐男子职业技术学院'],\n        bio: '',\n        attachment: ['https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png']\n    };\n}"]}