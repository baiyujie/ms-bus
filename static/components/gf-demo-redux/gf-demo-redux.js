define("components/gf-demo-redux/gf-demo-redux.ts",function(e,t){function n(e){return function(t,n){var i=n().region,a=i.page,o=i.pageSize,d=i.search;u.demo.fetch(r({},d,{start:o*(e.page-1),limit:o})).then(function(n){t({type:"region/fetch",payload:{list:n.list,total:n.total,page:e.page||a}})})}}function i(){return function(e,t){var i=t().region,a=i.page,o=i.record;u.demo.create(o).then(function(){e({type:"region/closeDialog"}),e(n({page:a}))})}}function a(){return function(e,t){var i=t().region,a=i.page,o=i.record;u.demo.update(o).then(function(){e(n({page:a}))})}}function o(e){return function(t,i){var a=i().region.page;u.demo.remove(e).then(function(e){"0"===e.code&&m.message.success({content:"删除成功"}),t(n({page:a}))})}}var d="undefined"!=typeof d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;i>n;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},s=e("node_modules/avalon2/dist/avalon"),c=e("node_modules/redux/dist/redux"),l=e("node_modules/redux-thunk/lib/index"),m=e("vendor/ane/index.ts"),u=e("services/storeService.ts");t.name="gf-demo-redux";var g=function(e,t){switch(void 0===e&&(e={show:!1,isEdit:!1,list:[],total:0,page:1,pageSize:6,search:null,record:null}),t.type){case"region/closeDialog":return r({},e,{show:!1});case"region/fetch":return r({},e,t.payload);case"region/readyForAdd":return r({},e,{isEdit:!1,show:!0});case"region/readyForEdit":return r({},e,{isEdit:!0,show:!0});case"region/changeSearch":return r({},e,{search:t.payload});case"region/changeRecord":return r({},e,{record:t.payload});default:return e}},p=c.createStore(c.combineReducers({region:g}),d.__REDUX_DEVTOOLS_EXTENSION__&&d.__REDUX_DEVTOOLS_EXTENSION__(),c.applyMiddleware(l["default"]));s.component(t.name,{template:'\n<div class="row">\n    <div class="col-xs-12 col-md-12">\n        <ms-dialog :widget="{$innerVm: \'demo_redux_form\', show: @show, onOk: @handleOk, title: @isEdit ? \'修改\' : \'新增\', onCancel: handleCancel}">\n            <div slot="body" ms-skip>\n                <div :important="demo_redux_form">\n                    <xmp is="ms-form" :widget="{$form: @$form}">\n                        <ms-form-item :widget="{label: \'ID\'}">\n                            <ms-input :widget="{value:@record.region_id,col: \'region_id\', $rules: { required: true, message: \'地区ID不能为空\' }}"></ms-input>\n                        </ms-form-item>\n                        <ms-form-item :widget="{label: \'名称\'}">\n                            <ms-input :widget="{value:@record.region_name,col: \'region_name\', $rules: { required: true, message: \'地区名称不能为空\' }}"></ms-input>\n                        </ms-form-item>\n                        <ms-form-item :widget="{label: \'PID\'}">\n                            <ms-input :widget="{value:@record.region_parent_id,col: \'region_parent_id\', $rules: { required: true, message: \'地区PID不能为空\' }}"></ms-input>\n                        </ms-form-item>\n                        <ms-form-item :widget="{label: \'套餐\'}" :for="($index, el) in @record.suites">\n                            <ms-input :widget="{value:el.name,col: \'suites[\' + $index + \'].name\'}"></ms-input>\n                        </ms-form-item>\n                    </xmp>\n                </div>\n            </div>\n        </ms-dialog>\n        <ms-form :widget="{$form:@$searchForm,type:\'search\',inline:true}">\n            <div class="row">\n                <div class="col-md-2">\n                    <ms-form-item :widget="{label: \'ID：\'}">\n                        <ms-input :widget="{col: \'region_id\', width: \'75%\'}"></ms-input>\n                    </ms-form-item>\n                </div>\n                <div class="col-md-2">\n                    <ms-form-item :widget="{label: \'名称：\'}">\n                        <ms-input :widget="{col: \'region_name.firstName\', width: \'75%\'}"></ms-input>\n                    </ms-form-item>\n                </div>\n                <div class="col-md-3">\n                    <ms-form-item :widget="{label: \'开始日期：\'}">\n                        <ms-datepicker :widget="{\n                            col:\'startDate\',\n                            placeholder:\'请选择开始日期\',\n                            width: \'70%\'\n                        }"></ms-datepicker>\n                    </ms-form-item>\n                </div>\n                <div class="col-md-3">\n                    <ms-form-item :widget="{label: \'结束日期：\'}">\n                        <ms-datepicker :widget="{\n                            col:\'endDate\',\n                            placeholder:\'请选择结束日期\',\n                            width: \'70%\'\n                        }"></ms-datepicker>\n                    </ms-form-item>\n                </div>\n                <div class="col-md-2">\n                    <button type="button" class="btn btn-primary" :click="@search">\n                        <span class="fa fa-search"></span>搜索\n                    </button>\n                    <button type="button" class="btn btn-success pull-right" :click="actions(\'add\')">\n                        <span class="fa fa-plus">\n                        </span>新增地区\n                    </button>\n                </div>\n            </div>\n        </ms-form>\n        <ms-table :widget="{data:@list,actions:@actions,pagination:@pagination,onChange:@handleTableChange}">\n            <ms-table-header :widget="{dataIndex:\'region_id\',type:\'selection\'}"></ms-table-header>\n            <ms-table-header :widget="{title:\'地区\',dataIndex:\'region_name\'}"></ms-table-header>\n            <ms-table-header :widget="{title:\'PID\',dataIndex:\'region_parent_id\'}"></ms-table-header>\n            <ms-table-header :widget="{title:\'操作\',dataIndex:\'region_id\'}">\n                <button type="button" class="btn btn-default btn-xs" :click="handle(\'edit\')"><i class="fa fa-edit"></i> 编辑</button>\n                <button type="button" class="btn btn-danger btn-xs" :click="handle(\'delete\')"><i class="fa fa-trash-o"></i> 删除</button>\n            </ms-table-header>\n        </ms-table>\n    </div>\n</div>\n',defaults:{show:!1,isEdit:!1,list:[],$searchForm:m.createForm({onFieldsChange:function(e,t){p.dispatch({type:"region/changeSearch",payload:t})}}),pagination:{current:1,total:0,pageSize:6},pattern:/^\d+-\d+-\d+( \d+:\d+:\d+)?$/,search:function(){this.fetch()},fetch:function(e){void 0===e&&(e={}),p.dispatch(n(e))},actions:function(e,t,n){"add"===e?(h.title="新增",h.record=u.demo.initialData(),p.dispatch({type:"region/readyForAdd"})):"edit"===e?(h.title="修改",h.record=n,p.dispatch({type:"region/readyForEdit"})):"delete"===e&&p.dispatch(o(n.region_id))},handleOk:function(){var e=this;h.$form.validateFields().then(function(t){t&&(p.dispatch(e.isEdit?a():i()),p.dispatch({type:"region/closeDialog"}))})},handleCancel:function(){p.dispatch({type:"region/closeDialog"})},handleTableChange:function(e){this.fetch({page:e.current})},mapStateToVm:function(){{var e=p.getState().region,t=e.show,n=e.isEdit,i=e.list,a=e.total,o=e.page,d=e.pageSize;e.search,e.record}this.list=i,this.pagination.total=a,this.pagination.current=o,this.pagination.pageSize=d,this.isEdit=n,this.show=t},onInit:function(){var e=this;this.mapStateToVm(),p.subscribe(function(){e.mapStateToVm()}),this.fetch()},onReady:function(){}}});var h=s.define({$id:"demo_redux_form",title:"",$form:m.createForm({record:u.demo.initialData(),onFieldsChange:function(e,t){p.dispatch({type:"region/changeRecord",payload:t})}}),record:u.demo.initialData()})});