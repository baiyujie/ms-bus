{"version":3,"sources":["/components/common-sidebar/common-sidebar.ts"],"names":[],"mappings":";;;AAAA,gCAAkC;AAClC,4CAA8C;AAE9C,qDAA0D;AAE1D,MAAM,CAAC,MAAM,CAAC,UAAU,EAAE;IACtB,KAAK,YAAC,IAAI,EAAE,IAAI;QACZ,CAAC,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;IACjC,CAAC;IACD,KAAK,YAAC,IAAI,EAAE,IAAI;QACZ,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;IAC/B,CAAC;CACJ,CAAC,CAAC;AAEU,YAAI,GAAG,gBAAgB,CAAC;AAErC,MAAM,CAAC,SAAS,CAAC,YAAI,EAAE;IACnB,QAAQ,EAAE,QAAQ,CAAC,uBAAuB,CAAC;IAC3C,QAAQ,EAAE;QACN,IAAI,EAAE,EAAE;QACR,OAAO,EAAE,WAAW;QACpB,MAAM,EAAE,EAAE;QACV,OAAO,EAAE,KAAK;QACd,SAAS,YAAC,IAAI,EAAE,MAAM;YAClB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;gBAC/C,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC;gBACzB,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;oBACT,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC;gBAC9B,CAAC;YACL,CAAC;YAAC,IAAI,CAAC,CAAC;gBACJ,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;oBAC3B,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;gBACrB,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACJ,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI;gBAC3B,CAAC;YACL,CAAC;QACL,CAAC;QACD,MAAM;YACF,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;QACpC,CAAC;QACD,cAAc,YAAC,IAAI;YACf,uCAAuC;YACvC,oBAAoB;YACpB,IAAI;YACJ,iFAAiF;YACjF,uCAAuC;YACvC,IAAI;YACJ,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;gBAAC,MAAM,CAAC;YAC3B,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,CAAC;gBAAC,MAAM,CAAC;YACvC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,KAAK,WAAE,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,GAAI,CAAC;gBAClD,EAAE,CAAC,CAAC,KAAK,CAAC,IAAI,KAAK,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;oBAC9B,6BAA6B;oBAC7B,MAAM,CAAC,IAAI,CAAC;gBAChB,CAAC;YACL,CAAC;YACD,MAAM,CAAC,KAAK,CAAC;QACjB,CAAC;QACD,MAAM,YAAC,KAAK;YAAZ,iBAIC;YAHG,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,UAAC,IAAI;gBACvB,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACrB,CAAC,CAAC,CAAC;QACP,CAAC;QACD,OAAO,YAAC,KAAK;YACT,MAAM,CAAC,WAAW,EAAE,CAAC;QACzB,CAAC;KACJ;CACJ,CAAC,CAAC","file":"common-sidebar.js","sourcesContent":["import * as avalon from 'avalon2';\nimport * as beyond from '../../vendor/beyond';\n\nimport * as menuService from '../../services/menuService';\n\navalon.effect('collapse', {\n    enter(elem, done) {\n        $(elem).slideDown(200, done);\n    },\n    leave(elem, done) {\n        $(elem).slideUp(200, done);\n    }\n});\n\nexport const name = 'common-sidebar';\n\navalon.component(name, {\n    template: __inline('./common-sidebar.html'),\n    defaults: {\n        menu: [],\n        actived: 'dashboard',\n        opened: '',\n        compact: false,\n        menuClick(item, parent) {\n            if (!item.children || item.children.length === 0) {\n                this.actived = item.name;\n                if (parent) {\n                    this.opened = parent.name;\n                }\n            } else {\n                if (this.opened == item.name) {\n                    this.opened = '';\n                } else {\n                    this.opened = item.name\n                }\n            }\n        },\n        search() {\n            this.$fire('all!title', 'Demo');\n        },\n        isChildActived(item) {\n            // if (item.name === sidebar.actived) {\n            //     return false;\n            // }\n            // for (var i = 0, bread; bread = avalon.vmodels.root.breadCrumb.$model[i++]; ) {\n            //     return bread.name === item.name;\n            // }\n            if (!item.children) return;\n            if (item.children.length === 0) return;\n            for (let i = 0, child; child = item.children[i++]; ) {\n                if (child.name === this.actived) {\n                    //sidebar.opened = item.name;\n                    return true;\n                }\n            }\n            return false;\n        },\n        onInit(event) {\n            menuService.menu.then((menu) => {\n                this.menu = menu;\n            });\n        },\n        onReady(event) {\n            beyond.initSidebar();\n        }\n    }\n});"]}