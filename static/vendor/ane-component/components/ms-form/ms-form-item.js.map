{"version":3,"sources":["/vendor/ane-component/components/ms-form/ms-form-item.ts"],"names":[],"mappings":";;;AAAA,gCAAkC;AAClC,2CAAqD;AAErD;;;;;;;;;;GAUG;AACH,MAAM,CAAC,SAAS,CAAC,cAAc,EAAE;IAC7B,QAAQ,EAAE,QAAQ,CAAC,qBAAqB,CAAC;IACzC,QAAQ,EAAE;QACN,OAAO,EAAE,IAAI;QACb,KAAK,EAAE,EAAE;QACT,OAAO,EAAE,EAAE;QACX,MAAM,EAAE,KAAK;QACb,KAAK,EAAE,KAAK;QACZ,OAAO,EAAE,EAAE;QACX,QAAQ,EAAE,KAAK;QACf,SAAS,EAAE,EAAE;QACb,oBAAoB,EAAE,EAAE,aAAa,EAAE,KAAK,EAAE;QAC9C,kBAAkB,EAAE,EAAE,YAAY,EAAE,CAAC,EAAE;QACvC,aAAa,YAAC,UAAU;YAAxB,iBAmBC;YAlBG,IAAI,CAAC,OAAO,CAAC,IAAI,KAAK,QAAQ,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,cAAc;gBAC/D,GAAC,UAAU,CAAC,IAAI,IAAG,EAAE,KAAK,EAAE,UAAU,CAAC,KAAK,EAAE,YAAY,EAAE,UAAU,CAAC,YAAY,EAAE;oBACvF,CAAC;YACH,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC;gBAAC,MAAM,CAAE;YAC/B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS;gBACxB,GAAC,UAAU,CAAC,IAAI,IAAG,EAAE,KAAK,EAAE,UAAU,CAAC,KAAK,EAAE;oBAChD,CAAC;YACH,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,OAAO,GAAG,UAAU,CAAC,IAAI,EAAE,UAAC,OAAO;gBACrD,KAAI,CAAC,KAAK,GAAG,IAAI,CAAC;gBAClB,KAAI,CAAC,OAAO,GAAG,OAAO,CAAC;YAC3B,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,OAAO,EAAE,gBAAM;gBACjC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oBAChD,KAAI,CAAC,KAAK,GAAG,KAAK,CAAC;oBACnB,KAAI,CAAC,OAAO,GAAG,EAAE,CAAC;gBACtB,CAAC;YACL,CAAC,CAAC,CAAC;;QACP,CAAC;QACD,YAAY,YAAC,IAAI;YACb,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC,CAAC;gBACrC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YACtB,CAAC;YACD,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QACpC,CAAC;QACD,MAAM,YAAC,KAAK;YACR,KAAK,CAAC,MAAM,CAAC,OAAO,GAAG,cAAc,CAAC;YACtC,KAAK,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;YACzB,IAAI,CAAC,OAAO,GAAG,8BAAmB,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;YACpD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,KAAK,IAAI,CAAC,CAAC,CAAC;gBACxB,MAAM,6BAA6B,CAAC;YACxC,CAAC;YACD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;QACtC,CAAC;QACD,OAAO,YAAC,KAAK;QACb,CAAC;KACJ;IACD,QAAQ,EAAE,SAAS;CACtB,CAAC,CAAC","file":"ms-form-item.js","sourcesContent":["import * as avalon from 'avalon2';\nimport { findParentComponent } from '../../ane-util';\n\n/**\n * 表单项组件\n * @prop label 表单项标签\n * \n * @example\n * ``` html\n * <ms-form-item :widget=\"{label: '标题'}\">\n        <ms-input :widget=\"{value: @title, col: 'title'}\"></ms-input>\n    </ms-form-item>\n * ```\n */\navalon.component('ms-form-item', {\n    template: __inline('./ms-form-item.html'),\n    defaults: {\n        $formVm: null,\n        label: '',\n        control: '',\n        inline: false,\n        dirty: false,\n        reasons: [],\n        hasRules: false,\n        className: '',\n        inlineFormGroupStyle: { verticalAlign: 'top' },\n        inlineMessageStyle: { marginBottom: 0 },\n        onFieldChange(descriptor) {\n            this.$formVm.type !== 'search' && this.$formVm.$form.setFieldsValue({\n                [descriptor.name]: { value: descriptor.value, denyValidate: descriptor.denyValidate }\n            });\n            if (!descriptor.rules) return ;\n            this.hasRules = true;\n            this.$formVm.$form.addFields({\n                [descriptor.name]: { rules: descriptor.rules }\n            });\n            this.$formVm.$form.on('error' + descriptor.name, (reasons) => {\n                this.dirty = true;\n                this.reasons = reasons;\n            });\n            this.$formVm.$form.on('reset', fields => {\n                if (~Object.keys(fields).indexOf(descriptor.name)) {\n                    this.dirty = false;\n                    this.reasons = [];\n                }\n            });\n        },\n        onFormChange(meta) {\n            if (this.$formVm.$form.autoAsyncChange) {\n                this.dirty = true;\n            }\n            this.$formVm.onFormChange(meta);\n        },\n        onInit(event) {\n            event.target._ctype_ = 'ms-form-item';\n            event.target._vm_ = this;\n            this.$formVm = findParentComponent(this, 'ms-form');\n            if (this.$formVm === null) {\n                throw 'ms-form-item 必须放在 ms-form 内';\n            }\n            this.inline = this.$formVm.inline;\n        },\n        onReady(event) {\n        }\n    },\n    soleSlot: 'control'\n});"]}