{"version":3,"sources":["/vendor/ane/components/ms-view/ms-view.js"],"names":[],"mappings":";;;AAAA,IAAI,MAAM,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AAEhC,IAAI,MAAM,GAAG,EAAE;AAEf,MAAM,CAAC,SAAS,CAAC,SAAS,EAAE;IACxB,QAAQ,EAAE,6CAA6C;IACvD,QAAQ,EAAE;QACN,IAAI,EAAE,QAAQ;QACd,IAAI,EAAE,IAAI;QAEV,OAAO,EAAE,UAAS,CAAC;YACf,IAAI,IAAI,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI;YACxB,IAAI,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC;YACxB,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,EAAE;YACvC,UAAU,CAAC;gBACP,CAAC,CAAC,MAAM,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI;YAC9B,CAAC,EAAC,GAAG,CAAC;QAEV,CAAC;QACD,SAAS,EAAE,UAAS,CAAC;YACjB,IAAI,IAAI,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI;YACxB,IAAI,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC;YACxB,IAAI,EAAE,GAAG,KAAK,CAAC,EAAE;YACjB,IAAI,MAAM,GAAG,EAAE,CAAC,MAAM;YACtB,MAAM,IAAI,MAAM,CAAC,OAAO,EAAE;YAC1B,OAAO,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC,GAAG,CAAC;QACjC,CAAC;KACJ;CACJ,CAAC,CAAC;AAEH,OAAO,CAAC,GAAG,GAAG,kBAAkB,IAAI,EAAE,IAAI,EAAE,EAAE;IAC1C,MAAM,CAAC,IAAI,CAAC,GAAG;QACX,EAAE,EAAE,EAAE;QACN,IAAI,EAAE,IAAI;KACb;AACL,CAAC;AAED,OAAO,CAAC,OAAO,GAAG,UAAU,IAAI;IAC5B,IAAI,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;IACzB,KAAK,CAAC,IAAI,GAAG,OAAO,KAAK,CAAC,IAAI,IAAI,UAAU,GAAG,KAAK,CAAC,IAAI,EAAE,GAAG,KAAK,CAAC,IAAI,CAAC;IACzE,KAAK,CAAC,EAAE,GAAG,OAAO,KAAK,CAAC,EAAE,IAAI,UAAU,GAAG,KAAK,CAAC,EAAE,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC;IACjE,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,MAAM;QAC5D,KAAK,CAAC,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;QACvB,KAAK,CAAC,EAAE,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;IACzB,CAAC,CAAC,CAAC;AACP,CAAC","file":"ms-view.js","sourcesContent":["var avalon = require('avalon2');\n\nvar states = {}\n\navalon.component('ms-view', {\n    template: '<div ms-html=\"@page\" class=\"ms-view\"></div>',\n    defaults: {\n        page: '&nbsp;',\n        path: 'no',\n       \n        onReady: function(e) {\n            var path = e.vmodel.path\n            var state = states[path]\n            avalon.vmodels[state.vm.$id] = state.vm\n            setTimeout(function() {//必须等它扫描完这个template,才能替换\n                e.vmodel.page = state.html\n            },100)\n\n        },\n        onDispose: function(e) {\n            var path = e.vmodel.path\n            var state = states[path]\n            var vm = state.vm\n            var render = vm.render\n            render && render.dispose()\n            delete avalon.vmodels[vm.$id]\n        }\n    }\n});\n\nexports.add = function addState(path, html, vm) {\n    states[path] = {\n        vm: vm,\n        html: html\n    }\n}\n\nexports.resolve = function (path) {\n    var state = states[path];\n    state.html = typeof state.html == 'function' ? state.html() : state.html;\n    state.vm = typeof state.vm == 'function' ? state.vm() : state.vm;\n    return Promise.all([state.html, state.vm]).then(function (result) {\n        state.html = result[0];\n        state.vm = result[1];\n    });\n}"]}