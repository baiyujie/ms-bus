{"version":3,"sources":["/vendor/ane/components/ms-dialog/ms-dialog.ts"],"names":[],"mappings":";;;AAAA,gCAAkC;AAClC,iCAAmC;AACnC,2CAAmD;AAEnD,MAAM,CAAC,SAAS,CAAC,WAAW,EAAE;IAC1B,QAAQ,EAAE,4EAA4E;IACtF,QAAQ,EAAE;QACN,IAAI,EAAE,OAAO;QACb,OAAO,EAAE,IAAI;QACb,IAAI,EAAE,KAAK;QACX,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,KAAK;QAChB,QAAQ,EAAE,EAAE;QACZ,IAAI,gBAAI,CAAC;QACT,QAAQ,gBAAI,CAAC;QACb,MAAM,YAAC,KAAK;YAAZ,iBA6CC;YA5CG,IAAI,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC;YACtB,EAAE,CAAC,MAAM,CAAC,MAAM,EAAE,UAAC,IAAI;gBACnB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;oBACP,EAAE,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC;wBACxB,OAAO,EAAE,EAAE,CAAC,IAAI;wBAChB,KAAK,EAAE,WAAW;wBAClB,IAAI,EAAE,EAAE,CAAC,IAAI;wBACb,OAAO,EAAE;4BACL,IAAI,EAAE;gCACF,KAAK,EAAE,IAAI;gCACX,SAAS,EAAE,aAAa;gCACxB,QAAQ;oCACJ,EAAE,CAAC,IAAI,EAAE,CAAC;oCACV,MAAM,CAAC,KAAK,CAAC;gCACjB,CAAC;6BACJ;4BACD,MAAM,EAAE;gCACJ,KAAK,EAAE,IAAI;gCACX,SAAS,EAAE,aAAa;gCACxB,QAAQ;oCACJ,EAAE,CAAC,QAAQ,EAAE,CAAC;gCAClB,CAAC;6BACJ;yBACJ;qBACJ,CAAC,CAAC,EAAE,CAAC,iBAAiB,EAAE,UAAC,CAAC;wBACvB,UAAU,CAAC;4BACP,EAAE,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gCACxB,CAAC,CAAC,MAAM,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;4BACrC,CAAC;4BAAC,IAAI,CAAC,CAAC;gCACJ,CAAC,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;4BACxC,CAAC;wBACL,CAAC,EAAE,GAAG,CAAC,CAAC;oBACZ,CAAC,CAAC;yBACD,EAAE,CAAC,gBAAgB,EAAE;oBAEtB,CAAC,CAAC,CAAC;oBACH,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,KAAI,CAAC,QAAQ,CAAC,CAAC;oBACrE,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gBACnC,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACJ,EAAE,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;wBACb,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;oBAC9D,CAAC;gBACL,CAAC;YACL,CAAC,CAAC,CAAC;QACP,CAAC;QACD,OAAO,YAAC,KAAK;YACT,4BAAiB,CAAC,IAAI,CAAC,CAAC;YACxB,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QAC1C,CAAC;QACD,SAAS,YAAC,KAAK;QACf,CAAC;KACJ;CACJ,CAAC,CAAC","file":"ms-dialog.js","sourcesContent":["import * as avalon from 'avalon2';\nimport * as bootbox from 'bootbox';\nimport { parseSlotToVModel } from '../../ane-util';\n\navalon.component('ms-dialog', {\n    template: '<div style=\"display: none\"><slot name=\"header\" /><slot name=\"body\"/></div>',\n    defaults: {\n        body: 'blank',\n        $dialog: null,\n        show: false,\n        size: '',\n        uploading: false,\n        $innerVm: '',\n        onOk() {},\n        onCancel() {},\n        onInit(event) {\n            var vm = event.vmodel;\n            vm.$watch('show', (newV) => {\n                if (newV) {\n                    vm.$dialog = bootbox.dialog({\n                        message: vm.body,\n                        title: '{{title}}',\n                        size: vm.size,\n                        buttons: {\n                            save: {\n                                label: '保存',\n                                className: 'btn-primary',\n                                callback() {\n                                    vm.onOk();\n                                    return false;\n                                }\n                            },\n                            cancel: {\n                                label: '取消',\n                                className: 'btn-default',\n                                callback() {\n                                    vm.onCancel();\n                                }\n                            }\n                        }\n                    }).on('hidden.bs.modal', (e) => {\n                        setTimeout(() => {\n                            if ($('.modal.in').length) {\n                                $('body').addClass('modal-open');\n                            } else {\n                                $('body').removeClass('modal-open');\n                            }\n                        }, 100);\n                    })\n                    .on('shown.bs.modal', () => {\n                        \n                    });\n                    vm.$dialog.find('.modal-content').attr(':controller', this.$innerVm);\n                    avalon.scan(vm.$dialog.get(0));\n                } else {\n                    if (vm.$dialog) {\n                        vm.$dialog.find('.bootbox-close-button').trigger('click');\n                    }\n                }\n            });\n        },\n        onReady(event) {\n            parseSlotToVModel(this);\n            this.show && this.$fire('show', true);\n        },\n        onDispose(event) {\n        }\n    }\n});"]}