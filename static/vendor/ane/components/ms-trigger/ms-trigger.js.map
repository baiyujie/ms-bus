{"version":3,"sources":["/vendor/ane/components/ms-trigger/ms-trigger.ts"],"names":[],"mappings":"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","file":"ms-trigger.js","sourcesContent":["import * as avalon from 'avalon2';\nimport * as domAlign from 'dom-align';\n\navalon.component('ms-trigger', {\n    template: '<span style=\"display:none;\"></span>',\n    defaults: {\n        width: 0,\n        visible: false,\n        innerVmId: '',\n        innerClass: '',\n        innerTemplate: '',\n        withInBox() { return true; },\n        getTarget: avalon.noop,\n        onHide: avalon.noop,\n        hide(panel) {\n            panel.style.top = '-9999px';\n            panel.style.left = '-9999px';\n            this.onHide();\n        },\n        onInit(event) {\n            const DOC = document, body = DOC.body;\n            const medium = DOC.createElement('div');\n            const panel = DOC.createElement('div');\n            medium.setAttribute('id', this.$id);\n            medium.setAttribute('style', 'position: absolute; top: 0px; left: 0px; width: 100%;');\n            panel.setAttribute('class', this.innerClass);\n            panel.setAttribute('style', 'z-index: 1050;left: -9999px;top: -9999px;position: absolute;outline: none;overflow: hidden;');\n            panel.setAttribute(':important', this.innerVmId);\n            panel.innerHTML = this.innerTemplate.replace(/\\n/g, '');\n            medium.appendChild(panel);\n            body.appendChild(medium);\n\n            avalon.scan(panel, avalon.vmodels[this.innerVmId]);\n\n            avalon.bind(DOC, 'click', e => {\n                if (this.visible && panel !== e.target && !avalon.contains(panel, e.target) &&  !this.withInBox(e.target)) {\n                    this.hide(panel);\n                }\n            });\n            this.$watch('visible', v => {\n                if (v) {\n                    panel.style.width = this.width === 0 ? 'auto' : (this.width + 'px');\n                    panel.scrollTop = 0;\n                    domAlign(panel, this.getTarget(), {\n                        points: ['tl', 'bl'],\n                        offset: [0, 1],\n                        //targetOffset: ['0%','100%']\n                        overflow: {\n                            adjustY: true\n                        }\n                    })\n                } else {\n                    this.hide(panel);\n                }\n            });\n        },\n        onDispose(event) {\n            const DOC = document, body = DOC.body;\n            const medium = DOC.getElementById(this.$id);\n            body.removeChild(medium);\n        }\n    }\n});"]}