define("vendor/ane/components/ms-select/ms-select.ts",function(e){"use strict";function n(e){return e.reduce(function(e,n){if("ms-select-option"!=n.is)return e;n.inlineTemplate;return e.push({label:n.inlineTemplate||"",value:n.props.value||"",disabled:n.props.disabled||!1}),e},[])}var t=e("node_modules/avalon2/dist/avalon"),i=e("vendor/ane/components/ms-form/ms-control.ts");e("vendor/ane/components/ms-trigger/index.ts");var l=e("vendor/ane/ane-util.ts"),s=e("vendor/ane/components/ms-form/utils.ts");i["default"].extend({displayName:"ms-select",template:'\n<div class="ane-select form-control"\n    :class="[(@isMultiple ? \'ane-select-multiple\' : \'\')]"\n    :css="{width:@width}"\n    :click="@handleClick"\n    role="combobox"\n    aria-autocomplete="list"\n    aria-haspopup="true"\n    :attr="{\'aria-expanded\': @panelVisible + \'\'}">\n    <ul class="ane-select-selection" :class="[(@isMultiple ? \'ane-select-tags\' : \'\')]">\n        <li class="ane-select-selected" :visible="!@isMultiple && (!@showSearch || !@panelVisible)">{{@displayValue}}</li>\n        <li class="ane-select-choice" :for="choice in @selection">\n            <span>{{choice.label}}</span>\n            <i class="fa fa-times" :click="@removeSelection($event, choice) | stop"></i>\n        </li>\n        <li class="ane-select-search">\n            <input class="ane-select-search-field"\n                name="search"\n                type="text"\n                autocomplete="off"\n                :duplex="@searchValue"\n                :css="{visibility:(@showSearch && @panelVisible)?\'visible\':\'hidden\'}"\n                :keydown="@handleDelete" />\n        </li>\n    </ul>\n    <i class="fa ane-select-arrow"\n        :class="[(@panelVisible ? \'fa-caret-up\' : \'fa-caret-down\')]"\n        :visible="@mode === \'\'"></i>\n    <ms-trigger :widget="{\n        width: @panelWidth,\n        visible: @panelVisible,\n        innerVmId: @panelVmId,\n        innerClass: @panelClass,\n        innerTemplate: @panelTemplate,\n        withInBox: @withInBox,\n        getTarget: @getTarget,\n        onHide: @handlePanelHide}">\n    </ms-trigger>\n</div>\n',defaults:{value:[],mode:"",options:[],selection:[],remote:!1,remoteMethod:t.noop,displayValue:"",showSearch:!1,searchValue:"",focusSearch:function(){this.$element.getElementsByTagName("input").search.focus()},withInBox:function(e){return this.$element===e||t.contains(this.$element,e)},getTarget:function(){return this.$element},handleClick:function(){this.panelVisible?this.isMultiple||(this.panelVisible=!1):(this.searchValue="",this.panelWidth=this.$element.offsetWidth,this.panelVisible=!0,this.focusSearch())},handleDelete:function(e){if((8===e.which||46===e.which)&&""===this.searchValue){this.selection.removeAt(this.selection.length-1);var n=this.selection.toJSON(),i=n.map(function(e){return e.value});t.vmodels[this.panelVmId].selection=n,this.handleChange({target:{value:this.isMultiple?i:i[0]||""},type:"select"})}},removeSelection:function(e,n){this.selection.removeAll(function(e){return e.value===n.value});var i=this.selection.toJSON(),l=i.map(function(e){return e.value});t.vmodels[this.panelVmId].selection=i,this.focusSearch(),this.handleChange({target:{value:this.isMultiple?l:l[0]||""},type:"select"})},panelWidth:0,panelVmId:"",panelVisible:!1,panelClass:"ane-select-dropdown",panelTemplate:'\n<div style="overflow: auto">\n    <ul class="ane-select-dropdown-menu" role="menu">\n        <li class="ane-select-dropdown-menu-item"\n            :class="[\n                (@selection.some(function(){return arguments[0].value===option.value}) ? \'ane-select-dropdown-menu-item-selected\' : \'\'),\n                (option.disabled ? \'ane-select-dropdown-menu-item-disabled\' : \'\')\n            ]"\n            :for="option in @getFilteredOptions()"\n            :click="@handleOptionClick($event, option)"\n            role="menuitem">\n            {{option.label}}\n            <i class="fa fa-check" :visible="@isMultiple"></i>\n        </li>\n        <li class="ane-select-dropdown-menu-item ane-select-dropdown-menu-item-disabled"\n            :visible="@getFilteredOptions().length <= 0 && @searchValue && !@loading">无数据</li>\n        <li class="ane-select-dropdown-menu-item ane-select-dropdown-menu-item-disabled"\n            :visible="@loading">加载中</li>\n    </ul>\n</div>\n',handlePanelHide:function(){this.panelVisible=!1},$computed:{isMultiple:{get:function(){return"multiple"===this.mode||"tags"===this.mode}}},mapValueToSelection:function(e){this.selection=this.options.filter(function(n){return e.contains(n.value)}),this.selection.length>0&&(this.displayValue=this.selection[0].label),t.vmodels[this.panelVmId].selection=this.selection.toJSON()},onInit:function(){var e=this,i=this;if(0===this.options.length){var a=l.getChildTemplateDescriptor(this);this.options=n(a)}s.emitToFormItem(this),this.$watch("value",function(n){var t=n.toJSON();e.mapValueToSelection(n),e.handleChange({target:{value:e.isMultiple?t:t[0]||""},denyValidate:!0,type:"select"})}),this.panelVmId=this.$id+"_panel";var o=t.define({$id:this.panelVmId,selection:[],loading:!1,isMultiple:this.isMultiple,options:this.options.toJSON(),searchValue:"",getFilteredOptions:function(){return this.options.filter(this.filterFn)},filterFn:function(e){if(this.loading)return!1;if(i.remote)return!0;var n=new RegExp(t.escapeRegExp(this.searchValue),"i");return n.test(e.label)||n.test(e.value)},handleOptionClick:function(e,n){if(n.disabled)return!1;i.isMultiple?(this.selection.some(function(e){return e.value===n.value})?this.selection.removeAll(function(e){return e.value===n.value}):this.selection.push(n),i.focusSearch()):(this.selection=[n],i.panelVisible=!1);var t=this.selection.toJSON(),l=t.map(function(e){return e.value});i.handleChange({target:{value:i.isMultiple?l:l[0]||""},type:"select"}),i.displayValue=n.label,i.selection=t}});this.$watch("searchValue",l.debounce(function(n){o.searchValue=n,e.remote&&n&&(o.loading=!0,e.remoteMethod(n).then(function(e){o.loading=!1,o.options=e}))})),this.$watch("isMultiple",function(e){o.isMultiple=e}),this.mapValueToSelection(this.value)},onDispose:function(){delete t.vmodels[this.panelVmId]}}})});