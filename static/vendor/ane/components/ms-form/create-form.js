define("vendor/ane/components/ms-form/create-form.ts",function(e,t){"use strict";function n(e){return new r(e)}function r(e){this.cachedRecord={},this.fields={},this.all={},c.mix(this,l,e)}function i(e,t,n){var r,i=/\.|\].|\[|\]/,o=e;t=t.split(i).filter(function(e){return!!e});var a,s=Object.prototype.toString.call(n);for(a="[object Array]"==s?c.mix(!0,{},{t:n}).t:"[object Object]"==s?c.mix(!0,{},n):n;r=t.shift();)0===t.length?o[r]=a:o=o[r]=o[r]||{}}function o(e,t){var n,r=/\.|\].|\[|\]/,i=e;for(t=t.split(r).filter(function(e){return!!e});(n=t.shift())&&i;)i=i[n];return i}var a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r["throw"](e))}catch(t){o(t)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(r){n=[6,r],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:n(0),"throw":n(1),"return":n(2)}},c=e("node_modules/avalon2/dist/avalon"),u=e("node_modules/async-validator/lib/index");t.createForm=n;var l={record:{},autoAsyncChange:!0,onFieldsChange:c.noop};r.prototype.setFieldsValue=function(e){var t=this;return this.autoAsyncChange?(Object.keys(e).forEach(function(n){var r=e[n];i(t.record,n,r.value),!r.denyValidate&&t.fields[n]&&t.validateField(n,t.fields[n]).then(function(e){e.isOk?t.trigger("error"+e.name,[]):t.trigger("error"+e.name,[{message:e.message}])})}),void this.onFieldsChange(e,this.record)):void Object.keys(e).forEach(function(n){i(t.cachedRecord,n,e[n].value)})},r.prototype.addFields=function(e){var t=this;Object.keys(e).forEach(function(n){t.fields[n]=e[n]})},r.prototype.on=function(e,t){(this.all[e]||(this.all[e]=[])).push(t)},r.prototype.trigger=function(e,t){(this.all[e]||[]).map(function(e){e(t)})},r.prototype.validateField=function(e,t){return a(this,void 0,void 0,function(){var n,r,i,a,c;return s(this,function(s){switch(s.label){case 0:return n=t.rules,r=o(this.record,e),i={isOk:!0,name:e},n?(a=new u((c={},c[e]=n,c)),[4,new Promise(function(t){a.validate((n={},n[e]=r,n),function(n){t(n?{isOk:!1,name:e,message:n[0].message}:{isOk:!0,name:e})});var n})]):[2,i];case 1:return i=s.sent(),[2,i]}})})},r.prototype.validateFields=function(e){var t=this;void 0===e&&(e=this.fields);var n={},r={};this.autoAsyncChange||(this.record=c.mix(!0,{},this.record,this.cachedRecord)),Object.keys(e).map(function(i){r[i]=e[i].rules,n[i]=o(t.record,i)});var i=new u(r);return new Promise(function(e){i.validate(n,function(n,r){var i=Object.keys(r||{}),o=!0;Object.keys(t.fields).map(function(e){~i.indexOf(e)?(o=!1,t.trigger("error"+e,r[e])):t.trigger("error"+e,[])}),e(o)})})},r.prototype.resetFields=function(e){void 0===e&&(e=this.fields),this.record={},this.trigger("reset",e)}});