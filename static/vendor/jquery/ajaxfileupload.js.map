{"version":3,"sources":["/vendor/jquery/ajaxfileupload.js"],"names":[],"mappings":"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","file":"ajaxfileupload.js","sourcesContent":["var jQuery = require('jquery');\r\n\r\njQuery.extend({\r\n\t\r\n\r\n    createUploadIframe: function(id, uri)\r\n\t{\r\n\t\t\t//create frame\r\n            var frameId = 'jUploadFrame' + id;\r\n            var iframeHtml = '<iframe id=\"' + frameId + '\" name=\"' + frameId + '\" style=\"position:absolute; top:-9999px; left:-9999px\"';\r\n\t\t\tif(window.ActiveXObject)\r\n\t\t\t{\r\n                if(typeof uri== 'boolean'){\r\n\t\t\t\t\tiframeHtml += ' src=\"' + 'javascript:false' + '\"';\r\n\r\n                }\r\n                else if(typeof uri== 'string'){\r\n\t\t\t\t\tiframeHtml += ' src=\"' + uri + '\"';\r\n\r\n                }\t\r\n\t\t\t}\r\n\t\t\tiframeHtml += ' />';\r\n\t\t\tjQuery(iframeHtml).appendTo(document.body);\r\n\r\n            return jQuery('#' + frameId).get(0);\t\t\t\r\n    },\r\n    createUploadForm: function(id, fileElementId, data)\r\n\t{\r\n\t\t//create form\t\r\n\t\tvar formId = 'jUploadForm' + id;\r\n\t\tvar fileId = 'jUploadFile' + id;\r\n\t\tvar form = jQuery('<form  action=\"\" method=\"POST\" name=\"' + formId + '\" id=\"' + formId + '\" enctype=\"multipart/form-data\"></form>');\t\r\n\t\tif(data)\r\n\t\t{\r\n\t\t\tfor(var i in data)\r\n\t\t\t{\r\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"' + i + '\" value=\"' + data[i] + '\" />').appendTo(form);\r\n\t\t\t}\t\t\t\r\n\t\t}\t\t\r\n\t\tvar oldElement = jQuery('#' + fileElementId);\r\n\t\tvar newElement = jQuery(oldElement).clone();\r\n\t\tjQuery(oldElement).attr('id', fileId);\r\n\t\tjQuery(oldElement).before(newElement);\r\n\t\tjQuery(oldElement).appendTo(form);\r\n\r\n\r\n\t\t\r\n\t\t//set attributes\r\n\t\tjQuery(form).css('position', 'absolute');\r\n\t\tjQuery(form).css('top', '-1200px');\r\n\t\tjQuery(form).css('left', '-1200px');\r\n\t\tjQuery(form).appendTo('body');\t\t\r\n\t\treturn form;\r\n    },\r\n\r\n    ajaxFileUpload: function(s) {\r\n        // TODO introduce global settings, allowing the client to modify them for all requests, not only timeout\t\t\r\n        s = jQuery.extend({}, jQuery.ajaxSettings, s);\r\n        var id = new Date().getTime()        \r\n\t\tvar form = jQuery.createUploadForm(id, s.fileElementId, (typeof(s.data)=='undefined'?false:s.data));\r\n\t\tvar io = jQuery.createUploadIframe(id, s.secureuri);\r\n\t\tvar frameId = 'jUploadFrame' + id;\r\n\t\tvar formId = 'jUploadForm' + id;\t\t\r\n        // Watch for a new set of requests\r\n        if ( s.global && ! jQuery.active++ )\r\n\t\t{\r\n\t\t\tjQuery.event.trigger( \"ajaxStart\" );\r\n\t\t}            \r\n        var requestDone = false;\r\n        // Create the request object\r\n        var xml = {}   \r\n        if ( s.global )\r\n            jQuery.event.trigger(\"ajaxSend\", [xml, s]);\r\n        // Wait for a response to come back\r\n        var uploadCallback = function(isTimeout)\r\n\t\t{\t\t\t\r\n\t\t\tvar io = document.getElementById(frameId);\r\n            try \r\n\t\t\t{\t\t\t\t\r\n\t\t\t\tif(io.contentWindow)\r\n\t\t\t\t{\r\n\t\t\t\t\t xml.responseText = io.contentWindow.document.body?io.contentWindow.document.body.innerHTML:null;\r\n                \t xml.responseXML = io.contentWindow.document.XMLDocument?io.contentWindow.document.XMLDocument:io.contentWindow.document;\r\n\t\t\t\t\t \r\n\t\t\t\t}else if(io.contentDocument)\r\n\t\t\t\t{\r\n\t\t\t\t\t xml.responseText = io.contentDocument.document.body?io.contentDocument.document.body.innerHTML:null;\r\n                \txml.responseXML = io.contentDocument.document.XMLDocument?io.contentDocument.document.XMLDocument:io.contentDocument.document;\r\n\t\t\t\t}\t\t\t\t\t\t\r\n            }catch(e)\r\n\t\t\t{\r\n\t\t\t\thandleError(s, xml, null, e);\r\n\t\t\t}\r\n            if ( xml || isTimeout == \"timeout\") \r\n\t\t\t{\t\t\t\t\r\n                requestDone = true;\r\n                var status;\r\n                try {\r\n                    status = isTimeout != \"timeout\" ? \"success\" : \"error\";\r\n                    // Make sure that the request was successful or notmodified\r\n                    if ( status != \"error\" )\r\n\t\t\t\t\t{\r\n                        // process the data (runs the xml through httpData regardless of callback)\r\n                        var data = jQuery.uploadHttpData( xml, s.dataType );    \r\n                        // If a local callback was specified, fire it and pass it the data\r\n                        if ( s.success )\r\n                            s.success( data, status );\r\n    \r\n                        // Fire the global callback\r\n                        if( s.global )\r\n                            jQuery.event.trigger( \"ajaxSuccess\", [xml, s] );\r\n                    } else\r\n                        handleError(s, xml, status);\r\n                } catch(e) \r\n\t\t\t\t{\r\n                    status = \"error\";\r\n                    handleError(s, xml, status, e);\r\n                }\r\n\r\n                // The request was completed\r\n                if( s.global )\r\n                    jQuery.event.trigger( \"ajaxComplete\", [xml, s] );\r\n\r\n                // Handle the global AJAX counter\r\n                if ( s.global && ! --jQuery.active )\r\n                    jQuery.event.trigger( \"ajaxStop\" );\r\n\r\n                // Process result\r\n                if ( s.complete )\r\n                    s.complete(xml, status);\r\n\r\n                jQuery(io).unbind()\r\n\r\n                setTimeout(function()\r\n\t\t\t\t\t\t\t\t\t{\ttry \r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tjQuery(io).remove();\r\n\t\t\t\t\t\t\t\t\t\t\tjQuery(form).remove();\t\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t} catch(e) \r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\thandleError(s, xml, null, e);\r\n\t\t\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t\t}, 100)\r\n\r\n                xml = null\r\n\r\n            }\r\n        }\r\n        // Timeout checker\r\n        if ( s.timeout > 0 ) \r\n\t\t{\r\n            setTimeout(function(){\r\n                // Check to see if the request is still happening\r\n                if( !requestDone ) uploadCallback( \"timeout\" );\r\n            }, s.timeout);\r\n        }\r\n        try \r\n\t\t{\r\n\r\n\t\t\tvar form = jQuery('#' + formId);\r\n\t\t\tjQuery(form).attr('action', s.url);\r\n\t\t\tjQuery(form).attr('method', 'POST');\r\n\t\t\tjQuery(form).attr('target', frameId);\r\n            if(form.encoding)\r\n\t\t\t{\r\n\t\t\t\tjQuery(form).attr('encoding', 'multipart/form-data');      \t\t\t\r\n            }\r\n            else\r\n\t\t\t{\t\r\n\t\t\t\tjQuery(form).attr('enctype', 'multipart/form-data');\t\t\t\r\n            }\t\t\t\r\n            jQuery(form).submit();\r\n\r\n        } catch(e) \r\n\t\t{\t\t\t\r\n            handleError(s, xml, null, e);\r\n        }\r\n\t\t\r\n\t\tjQuery('#' + frameId).load(uploadCallback\t);\r\n        return {abort: function () {}};\t\r\n\r\n    },\r\n\r\n    uploadHttpData: function( r, type ) {\r\n        var data = !type;\r\n        data = type == \"xml\" || data ? r.responseXML : r.responseText;\r\n        // If the type is \"script\", eval it in global context\r\n        if ( type == \"script\" )\r\n            jQuery.globalEval( data );\r\n        // Get the JavaScript object, if JSON is used.\r\n        if ( type == \"json\" )\r\n            eval( \"data = \" + jQuery(\"<div>\").html(data).text() );\r\n        // evaluate scripts within html\r\n        if ( type == \"html\" )\r\n            jQuery(\"<div>\").html(data).evalScripts();\r\n\r\n        return data;\r\n    }\r\n})\r\n\r\nfunction handleError(s,xhr,status,e){\r\n// If a local callback was specified, fire it\r\n\t\tif (s.error) {\r\n\t\t\ts.error.call(s.context || s,xhr,status,e);\r\n\t\t}\r\n\r\n\t\t// Fire the global callback\r\n\t\tif (s.global) {\r\n\t\t\t(s.context ? jQuery(s.context) : jQuery.event).trigger( \"ajaxError\", [xhr, s, e] );\r\n\t\t}\r\n\t}"]}