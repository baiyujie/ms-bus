<template>
    <div class="bus-select form-control"
        :click="handleClick"
        role="combobox"
        aria-autocomplete="list"
        aria-haspopup="true"
        :attr="{'aria-expanded': @panelVisible + ''}">
        <ul class="bus-select-selection" :class="[((@mode === 'multiple' || @mode === 'tags') ? 'bus-select-tags' : '')]">
            <li class="bus-select-selected" :visible="!(@mode === 'multiple' || @mode === 'tags') && (!@showSearch || !@panelVisible)">{{@displayValue}}</li>
            <li class="bus-select-choice" :for="choice in @selection">
                <span>{{choice.label}}</span>
                <i class="fa fa-times" :click="removeSelection(choice)"></i>
            </li>
            <li class="bus-select-search">
                <input class="bus-select-search-field" type="text" :duplex="@searchValue" :visible="@showSearch && @panelVisible" />
            </li>
        </ul>
        <i class="fa bus-select-arrow"
            :class="[(@panelVisible ? 'fa-caret-up' : 'fa-caret-down')]"
            :visible="@mode === ''"></i>
        <ms-trigger :widget="{
            width: @width,
            visible: @panelVisible,
            innerVmId: @panelVmId,
            innerClass: @panelClass,
            innerTemplate: @panelTemplate,
            withInBox: @withInBox,
            getTarget: @getTarget,
            onHide: @handlePanelHide}">
        </ms-trigger>
    </div>
</template>